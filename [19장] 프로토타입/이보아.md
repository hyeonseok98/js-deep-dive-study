# 19장 프로토타입

> 자바스크립트는 객체기반의 프로그래밍 언어이며 자바스크립트를 이루고 있는 거의 "모든것"이 객체다. 
  원시타입값을 제외한 나머지값들(함수, 배열, 정규표현식) 모두 객체다.

### 19.1 객체지향 프로그래밍

> 절차지향적인 관점에서 벗어나 **여러개의 독립적 단위**, <br>
즉 **객체의 집합**으로 프로그램을 표현하려는 프로그래밍 패러다임을 말한다.<br>

객체지향 프로그래밍 특징 
- 속성 : 실체는 특징이나 성질을 나타내는 속성을 가지고 있다. 이를 통해 실체를 인식, 구별 할 수 있다.
- 추상화 : 다양한 속성 중에서 프로그램에 필요한 속성만 간추려 내어 표현하는것을 의미한다.
- 자료구조 : 객체는 속성을 통해 여러 개의 값을 하나의 단위로 구성한 복합적인 자료구조이다. 
- 복합적인 자료구조 : **객체의 상태(state)를 나타내는 데이터** 와 **상태데이터를 조작할 수 있는 동작(be-havior)** 을 하나의 논리적인 단위로 묶어 생각한다.
- 상태데이터 : 프로퍼티 (property)  / 동작 : 메서드 (method)


### 19.2 상속과 프로토타입

> 상속(inheritance) 이란, 어떤 객체의 프로퍼티 또는 메서드를 다른 객체가 상속받아 그대로 사용할 수 있는 것.

상속과 프로토타입 특징 
- 자바스크립트는 **프로토타입을 기반 으로 상속**을 구현하여 **불필요한 중복을 제거** 한다.
- 중복을 제거하는 방법은 **기존의 코드를 재사용** 하는 것이다.
- 자바스크립트는 프로토타입을 기반으로 상속을 구현한다.

``` javascript
function Circle(radius){
  this.radius = radius;
  this.getArea = function () {
  //Math.PI는 원주율을 나타내는 상수다.
    return Math.PI * this.radius ** 2;
  };
}

const circle1 = new Circle(1); // 반지름 1 인스턴스
const circle2 = new Circle(2); 반지름 2 인스턴스

// circle 생성자 함수는 인스턴스를 생성할때 마다 동일한 동작을 하는
// get Area 메서드를 중복 생성하고 모든 인스턴스가 중복 소유함
// get Area 메서는 하나만 생성하여 모든 인스턴스가 공유해서 사용하는것이 바람직하다. 
// --> 상속을 통해 불필요한 중복을 제거 할 수 있고 프로토타입을 기반으로 상속을 구현함 
console.log(circle1.getArea === circle2.getArea); // false

  ```

### 19.3 프로토타입 객체

> 어떤 객체의 상위(부모) 객체의 역할을 하는 객체로서 다른객체에 공유프로퍼티(메서드 포함)를 제공한다.
  객체지향 프로그래밍의 근간을 이루는 객체간 상속을 구현하기 위해 사용된다.

### 19.3.1 **proto** 접근자 프로퍼티

>  모든 객체는 **__proto__접근자 프로퍼티**를 통해 자신의 프로토타입, 즉 **[[Prototype]] 내부 슬롯**에 간접적으로 접근할 수 있다.

접근자 프로퍼티 특징
 - 상속을 통해 사용된다.<br>
 - **proto** 접근자 프로퍼티는 객체가 직접 소유하는 프로퍼티가 아니라 Object.prototype 의 프로퍼티다.<br>
  - 모든 객체는 상속을 통해 Object.prototype.**proto** 접근자 프로퍼티를 사용할 수 있다.

- 프로토타입 체인은 **단방향 링크드 리스트**로 구현되어야 한다.<br>
 👉즉, 프로퍼티 검색 방향이 한쪽 방향으로만 흘러가야한다. <br>

- **순환참조** 하는 프로토타입 체인이 만들어지면 프로토타입 체인 종점이 존재하지 않기때문에 프로퍼티를 검색할때 **무한루프**에 빠지게 된다.
- **proto** 접근자 프로퍼티 대신 프로토타입의 참조를 취득하고 싶은 경우에는 Object.getPrototypeOf 메서드를 사용하고, 프로토타입을 교체하고 싶은 경우에는 Object.setPrototypeOf 메서드를 사용할 것을 권장한다.

📄 순환참조란? 서로가 자신의 프로토타입 되는 비정상적인 프로토타입 체인

### 19.3.2 함수 객체의 prototype 프로퍼티

> 함수 객체만이 소유하는 prototype 프로퍼티는 생성자 함수가 생성할 인스턴스의 프로토타입을 가리킨다.

```jsx
// 함수객체는 prototype 프로퍼티를 소유한다.
(function () {}).hasOwnProperty("prototype"); // true
// 일반객체는 prototype 프로퍼티를 소유하지 않는다.
({}).hasOwnProperty("prototype"); // false
```

 👉 생성자 함수로서 호출할 수 없는 함수 (non-constructor)인 화살표함수와 메서드 축약표현으로 정의한 메서드는 prototype 프로퍼티를 소유하지 않으며 프로토타입도 생성하지않는다.

### 19.3.3 프로토타입의 constructor 프로퍼티와 생성자함수

> 모든 프로토타입은 constructor 프로퍼티를 갖는다. 이 프로퍼티는 prototype 프로퍼티로 자신을 참조하고 있는 생성자함수를 가리킨다. <br>

  👉 즉 함수객체가 생성될 때 이뤄진다.
