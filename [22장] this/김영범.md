# [22ì¥] this

## 22.1 this í‚¤ì›Œë“œ

ì§€ê¸ˆê¹Œì§€ ê°ì²´ì— ëŒ€í•´ ë‹¤ë£¨ë©° ê°ì²´ëŠ” ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í”„ë¡œí¼í‹°ì™€ ë™ì‘ì„ ë‚˜íƒ€ë‚´ëŠ” ë©”ì„œë“œë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì€ ìë£Œêµ¬ì¡°ë¼ëŠ” ê²ƒì„ ì•Œì•˜ë‹¤.

ë©”ì„œë“œë¥¼ í†µí•´ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ”ë° ê°ì²´ ë‚´ì˜ í”„ë¡œí¼í‹°ì— ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼í• ê¹Œ?

ì´ë•Œ, `this` í‚¤ì›Œë“œê°€ ë©”ì„œë“œ ìì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆê¸°ì— ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

```javascript
const circle = {
  radius: 5, // í”„ë¡œí¼í‹°: ê°ì²´ ê³ ìœ ì˜ ìƒíƒœ ë°ì´í„°

  getDiameter() {
    // ë©”ì„œë“œ: í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ê³  ì¡°ì‘í•˜ëŠ” ë™ì‘
    return 2 * circle.radius;
  },
};

console.log(circle.getDiameter()); // 10
```

ìœ„ ì½”ë“œì—ì„œëŠ”, `circle` ë‚´ë¶€ì—ì„œ `circle` ì„ ì°¸ì¡°í•˜ëŠ” í˜•íƒœë‹¤.
ì´ëŸ° ì¬ê·€ì ì¸ ì½”ë“œê°€ ê°€ëŠ¥í•œ ì´ìœ ëŠ”, `getDiameter()` ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— circle ê°ì²´ê°€ ìƒì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤ë§Œ, ì´ëŸ° ì¬ê·€ì ì¸ ë°©ì‹ì€ ì¶”ì²œí•˜ëŠ” ë°©ë²•ì´ ì•„ë‹ˆë¼ê³  í•œë‹¤.
ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ì.

```javascript
function Circle(radius) {
    ????.radius = radius;
}

Circle.prototype.getDiameter = function () {
    return 2 * ????.radius;
}

const circle = new Circle(5);
```

ìƒì„±ì í•¨ìˆ˜ë¥¼ í†µí•´ ìƒì„±í•œ ì˜ˆì‹œë‹¤.

ìƒì„±ì í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , í”„ë¡œí† íƒ€ì…ì— ì¶”ê°€í•  í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•˜ëŠ” ìˆœê°„ê¹Œì§€ë„ ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¬ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.
ê·¸ë˜ì„œ, `????` ë¡œ í‘œê¸°í•´ë³´ì•˜ë‹¤.

ì‹¤ì œë¡œ `new + ìƒì„±ì í•¨ìˆ˜` ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ë‚˜ì„œì•¼ ê°€ë¦¬í‚¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒê¸°ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

ì´ ë•Œ, `this` ê°€ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤ëŠ” ê²ƒì´ë‹¤.
ì´ë ‡ê²Œ `this` ê°€ ê°€ë¦¬í‚¬ ëŒ€ìƒì´ ì •í•´ì§€ëŠ” ê²ƒì„ `this binding` ì´ë¼ í•œë‹¤.
ë”°ë¼ì„œ, `this`ëŠ” ê²°êµ­ ìƒì„±ëœ ìê¸°ìì‹ ì„ ê°€ë¦¬í‚¤ê¸° ë•Œë¬¸ì— `this` ëŠ” ìê¸° ì°¸ì¡° ë³€ìˆ˜ë¼ê³ ë„ í•œë‹¤.

ìœ„ ì˜ˆì‹œì˜ ë¹ˆ ì¹¸ì€ `this` ë¡œ ì±„ìš¸ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

```javascript
function Circle(radius) {
  this.radius = radius;
}

Circle.prototype.getDiameter = function () {
  return 2 * this.radius;
};

const circle = new Circle(5);
console.log(circle.getDiameter()); // 10
```

ì°¸ê³ ë¡œ, í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì•ì„œ ì–¸ê¸‰í•œ ê²ƒ ì²˜ëŸ¼ `this binding` ì´ ì§„í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

## 22.2 í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ this ë°”ì¸ë”©

í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ `this` ë°”ì¸ë”©ì´ ë‹¬ë¼ì§„ë‹¤.

    âœ¨ `this bniding` ì€ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ê°€ ìƒì„±ë˜ë©° ìƒìœ„ ìŠ¤ì½”í”„ê°€ ê²°ì •ë˜ëŠ” ì‹œì ë³´ë‹¤ ëŠ¦ë‹¤.
    ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ëŠ”, í•¨ìˆ˜ê°€ í‰ê°€ë˜ì–´ ìƒì„±ë  ë•Œ ê²°ì •ë˜ë©° `this binding`ì€ í˜¸ì¶œì‹œ ê²°ì •ëœë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²• ì—­ì‹œ ë‹¤ì–‘í•˜ë‹¤.

1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
2. ë©”ì„œë“œ í˜¸ì¶œ
3. ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ
4. Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

í•˜ë‚˜ ì”© ë‹¤ë£¨ì–´ ë³´ì.

### ğŸ“ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ

```javascript
const value = 1;

function foo() {
  console.log("foo's this: ", this); // window
  function bar() {
    console.log("bar's this: ", this); // window
  }
  bar();
}
foo();

setTimeout(function () {
  console.log("callback's this: ", this); // window
  console.log("callback's this.value: ", this.value); // 1, ì „ì—­ ìŠ¤ì½”í”„ì˜ value
});
```

ìœ„ ì²˜ëŸ¼, ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, `this` ëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

ê°ì²´ë‚˜ ë°°ì—´ì˜ í˜•íƒœê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, í•¨ìˆ˜ ìê¸° ìì‹ ì„ ì°¸ì¡°í•˜ëŠ” `this` ê°€ ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë§Œë“ ë‹¤.

ì½œë°± í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ í˜•íƒœë¡œ í˜¸ì¶œë˜ëŠ” ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ë‹¤.
ë”°ë¼ì„œ ìœ„ ì˜ˆì‹œì˜ `setTimeout()` ì— ì „ë‹¬ëœ ì½œë°±í•¨ìˆ˜ëŠ” `window.value` ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

```javascript
const value = 1;

const obj = {
  value: 100,
  foo() {
    const that = this; // ì´ this ëŠ” obj ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆìŒ.

    setTimeout(function () {
      console.log(that.value); // 100, obj.value
    }, 100);
  },
};
```

ì´ì™¸ì—ë„ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´, ì§ì ‘ `this binding` ì„ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```javascript
const value = 1;

const obj = {
  value: 100,
  foo() {
    setTimeout(
      function () {
        console.log(this.value); // 100, obj.value
      }.bind(this),
      100
    );
  },
};

obj.foo();
```

ë˜ëŠ”, í™”ì‚´í‘œ í•¨ìˆ˜ ìì²´ëŠ” `this binding` ì´ ì—†ê¸° ë•Œë¬¸ì— ì´ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆë‹¤.

```javascript
const value = 1;

const obj = {
  value: 100,
  foo() {
    setTimeout(() => {
      console.log(that.value); // 100, obj.value
    }, 100);
  },
};
```

### ğŸ“ ë©”ì„œë“œ í˜¸ì¶œ

ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œë„ `this binding` ì´ ì´ë£¨ì–´ì§„ë‹¤.
ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```javascript
const person = {
  name: "Lee",
  getName() {
    // ë©”ì„œë“œ ë‚´ë¶€ì˜ this ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”© ëœë‹¤.
    return this.name;
  },
};

console.log(person.getname()); // Lee, í˜¸ì¶œí•œ ê°ì²´ê°€ person ì„.
```

ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ì.
ë‹¤ë¥¸ ê°ì²´ê°€ ê°€ì§„ ë©”ì„œë“œë¥¼ ë³µì‚¬í•´ì˜¤ê²Œ ë§Œë“¤ì–´ë„ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤.

```javascript
const person = {
  name: "Lee",
  getName() {
    // ë©”ì„œë“œ ë‚´ë¶€ì˜ this ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”© ëœë‹¤.
    return this.name;
  },
};

const anotherPerson = {
  name: "Park",
};

anotherPerson.getName = person.getName;

console.log(anotherPerson.getName()); // Park

const getName = person.getName; // ì „ì—­ ìŠ¤ì½”í”„ì— ì •ì˜í•œ ë³€ìˆ˜ì— í• ë‹¹.

console.log(getName()); // '', ë”°ë¼ì„œ ì „ì—­ ê°ì²´ì— ì •ì˜ëœ `name` ì„ ì°¾ëŠ”ë‹¤.
```

ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ëŒ€ìƒì´ ëˆ„êµ¬ì¸ì§€ ëª…í™•í•˜ê²Œ íŒŒì•…í•˜ë©´ ì•Œê¸° ì‰½ë‹¤.

### ğŸ“ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ

22ì¥ì˜ ì‹œì‘ì—ì„œ `this` ì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ ë‹¤ë£¬ ê²ƒ ì²˜ëŸ¼,
ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ìƒì„±ì í•¨ìˆ˜ë¡œ ìƒì„±ë  ì¸ìŠ¤í„´ìŠ¤ì—ê²Œ `this binding` ì´ ì´ë£¨ì–´ì§„ë‹¤.

### ğŸ“ Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

ìœ„ ë©”ì„œë“œë“¤ì€ `Function.prototype` ì˜ ë©”ì„œë“œë¡œ ëª¨ë“  í•¨ìˆ˜ê°€ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.

`apply()` ì™€ `call()` ë©”ì„œë“œëŠ” í•¨ìˆ˜ê°€ `this binding`ì„ ì§„í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```javascript
// @param thisArg: this binding í•  ê°ì²´
// @param argsArray: í•¨ìˆ˜ì—ê²Œ ì „ë‹¬í•  ì¸ìˆ˜(ë°°ì—´ ë° ìœ ì‚¬ ë°°ì—´ ê°ì²´)
// @return í˜¸ì¶œë„ë‹ˆ í•¨ìˆ˜ì˜ ë°˜í™˜ê°’
Function.prototype.apply(thisArg[, argsArray])

// @param thisArg: this binding í•  ê°ì²´
// @param arg1, arg2, ...y: í•¨ìˆ˜ì—ê²Œ ì „ë‹¬í•  ì¸ìˆ˜(ë°°ì—´)
// @return í˜¸ì¶œë„ë‹ˆ í•¨ìˆ˜ì˜ ë°˜í™˜ê°’
Function.prototype.call(thisArg[, arg1[, arg2[, ...]]])
```

```javascript
function getThisBinding() {
  return this;
}

const thisArg = { a: 1 };

console.log(getThisBinding()); // window

console.log(getThisBinding.apply(thisArg)); // {a: 1}
console.log(getThisBinding.call(thisArg)); // {a: 1}
```

ìœ„ ì˜ˆì‹œë¥¼ ë³´ë©´, `getThisBinding()` í•¨ìˆ˜ì˜ `this` ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.

ì´ë•Œ, `apply` ì™€ `call` ì„ í†µí•´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒ `this binding` ì„ `thisArg` ì— ì§„í–‰í•œ ê²ƒì´ë‹¤.

ì´ì™€ ë‹¬ë¦¬, `bind()` ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  `this binding` ìƒˆë¡œ ì§„í–‰í•œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

```javascript
function getThisBinding() {
  return this;
}

const thisArg = { a: 1 };

console.log(getThisBinding()); // window

console.log(getThisBinding.bind(thisArg)); // getThisBinding, í•¨ìˆ˜ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
console.log(getThisBinding.bind(thisArg)()); // {a: 1}
```

ê·¸ë˜ì„œ `this binding` ê³¼ ë™ì‹œì— í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ì˜ë„ë¼ë©´ `apply()` ë‚˜ `call()` ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ `bind()` ë¥¼ ì‚¬ìš©í•´ë„ ì¢‹ì„ ê²ƒì´ë‹¤.

ì´ë“¤ì´ í•„ìš”í•œ ì´ìœ ëŠ”, ì½œë°±í•¨ìˆ˜ë¥¼ í†µí•´ ê°ì²´ ë‚´ì˜ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ë•Œ `this` ë¥¼ ì´ìš©í•´ì„œ ì½”ë“œì˜ íë¦„ì„ ì œì–´í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤!
