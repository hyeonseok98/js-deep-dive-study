# [04장] 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

> 변수란, 프로그래밍 언어에서 데이터를 관리하기 위한 핵심 개념!

일단 정확한 정의는 다시 살펴보기로 하고, 변수는 왜 필요한 것일까??

아래의 자바스크립트 예시를 보자.

```javascript
10 + 20;
```

위 표현식의 결과는 30 이 될 것이다.

우리는 이미 덧셈의 개념도 알고 있으며 `10` 과 `20` 이 뭔지, 그리고 `+` 가 덧셈 연산자라는 것 까지도 이해하고 있기에 가능한 것이다.

자바스크립트 엔진도 마찬가지로, 표현식을 보고 그 의미를 파악해 결과를 우리에게 보여준다.

다만, 이 과정이 우리의 뇌에서는 어떻게 이루어지는지 명확하지 않지만 컴퓨터에서는 명확하다.

컴퓨터에서는 CPU 에서 연산을 진행하고, 데이터를 저장하는 것은 메모리에서 이루어진다.

#### 메모리란?

> 데이터를 저장할 수 있는 메모리 셀(Memory Cell)의 집합체.

> 메모리 셀 하나는 1 Byte(=== 8 Bits)의 크기를 가지며, 각 셀마다 **고유한 메모리 주소 값**을 갖는다.

> 각 주소 값은 0부터 시작해서 메모리의 크기 만큼 표현한다. => ex. 4GB 메모리, 0 - 4,294,967,295(0x00000000 - 0xFFFFFFFF) 까지의 주소를 갖는다.

다시 위 표현식 예시로 돌아와서, 우리는 `10 + 20` 연산을 진행한 값을 얻었고 이는 메모리에 저장되었다.

그렇지만, 이때 연산의 결과를 찾아오는 방법이 있을까?

'방금 메모리 공간에 저장됐으니 메모리 주소를 찾아서 가져오면 되겠네!' 싶지만, 실제 메모리 공간에 접근하게 만드는 것은 위험한 일이다.
따라서, 자바스크립트에서는 개발자가 메모리 공간에 직접 접근할 수 없게 한다.

위 예시에서는 그냥 `10 + 20` 을 다시 입력할 수도 있지만, 조금만 복잡해진다면 반복하기엔 상당히 고통스러울 것이다!

`그럼 우리가 접근할 수 있는 방법으로 저장하는 방법이 있겠네!` => 이것이 바로 변수가 하는 일이다.

방금까지의 설명을 한 마디로 정리해보자면, 아래와 같다.

변수는 하나의 값을 저장하기 위해 확보한 메모리 공간이나 *해당 메모리 공간을 식별하기 위한 이름*이다.

이는 메모리 공간에 우리가 접근할 수 있는 매개체라고 이해하면 좋을 것 같다.

변수를 이용해 새로운 예시를 만들어 보자.

```javascript
var result = 10 + 20;
```

이제 우리는 `result` 라는 이름의 변수를 선언(declaration)하고, `10 + 20` 연산의 결과가 저장된 메모리 주소 값을 할당(assignment)했다.

그리고, `console.log(result)` 와 같이 result 에 할당한 값을 읽어오면 우리는 이 메모리 공간을 참조(reference)했다고 한다!

자세한 뜻은 아래에서 차차 다루어 보자.

## 4.2 식별자

방금 변수의 정의를 다룰 때, 메모리 공간을 식별하기 위한 이름이라고 했다.
변수에 값을 할당할 때, 연산 결과 값이 직접 저장되는 게 아니라 실질적으로는 연산 결과 값이 저장된 메모리의 주소값을 할당한다.

그래서 변수명은 **식별자**라고도 부른다.

## 4.3 변수 선언

이미 위 예시에서 보았지만, 변수를 사용하기 위해서는 선언이 필수적이다.
키워드, 변수 이름, 할당 연산자(=), 표현식 총 4가지가 필요하다.

자바스크립트에서 변수 선언 시 사용하는 키워드는 총 3개다. => var, let, const

`var` 키워드는 `let`, `const` 가 도입되기 전에는 유일한 변수 선언 키워드였다.

var 가 가지고 있는 단점을 보완하기 위해 let, const 가 도입된 것이다.

> var 는 함수 레벨 스코프, let 과 const 는 블록 레벨 스코프를 가졌다. 함수가 아닌 스코프에서 var 를 잘못 선언하면, 의도치 않은 경우에는 전역변수로 사용될 수 있다.

const 의 경우, 선언 시 반드시 어떤 값이든 할당 해야하지만 var 나 let 은 선언 시 초기화할 필요는 없다.
단지, 이때는 undefined 로 초기화가 이루어진다.

그러나, 선언한 적 없는 변수 이름을 통해 접근하려고 하면 `ReferenceError` 가 발생한다. 해당 식별자로 참조하려고 했지만, 식별자를 찾을 수 없다는 오류다.

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

이번에는 호이스팅에 대해서 알아보자.

```javascript
console.log(score); // undefined

var score;
```

이 코드를 실행하면 어떤 결과가 나타날까?

겉보기에는 `ReferenceError`가 발생할 것이라 생각했지만, undefined 가 출력이 된다.

`console.log(score)` 가 실행이 되기 전에 `let score` 가 먼저 이루어 졌다고 봐야할 것이다.
어떻게 그럴 수 있을까?? 바로, 실제 변수 선언은 코드가 실행되는 런타임 이전에 먼저 이루어지기 때문에 발생하는 것이다.

자바스크립트 엔진이 `console.log(score)`를 실행하기 전에 순서를 바꿔 `var score` 를 먼저 수행하도록 한다.
이는 엔진에 의해 소스코드 런타임 전 모든 종류의 선언문이 소스코드 최상단으로 옮겨진 것 처럼 동작하는 현상인 호이스팅(hoisting)이다.

이때, 선언문은 `let`, `const`, `function`, `function*`, `class` 등 모든 키워드를 통한 선언이 포합된다.

그러나, `let score = 0;` 으로 선언과 동시에 할당한다고 해서 `console.log(score)` 의 결과가 0으로 나타나지는 않는다. 오직 키워드와 변수 이름만 호이스팅 될 뿐이다.

## 4.5 값의 할당

직전에 호이스팅을 다룰 때, 선언 부분만 위로 끌어올려지고 값 할당은 이루어지지 않는다고 했다.

값이 할당되는 시점은 코드가 실행되는 런타임이다.

```javascript
console.log(score); // undefined

var score = 80;

console.log(score); // 80
```

위 예시를 보면, 이해가 될 것이다.

다만, `var score = 80` 은 `let score`, `score = 80` 과 동일하게 이루어지기 때문에 `undefined` 가 먼저 할당 된 뒤에 `80`을 저장한 다른 메모리 주소로 재할당이 된다는 것만 참고하자.

> 참고, 위 예시에서 let 이나 const 를 사용하면 ReferenceError 가 출력이 된다.
> 그러나 let 과 const 가 호이스팅되지 않는다는 말은 틀렸고, 이는 var 와 두 키워드 간 차이가 있기 때문이다.
> var 는 선언과 동시에 undefined 할당이 되고, let 은 즉시 초기화가 이루어지지 않는다.

## 4.6 값의 재할당

`const` 키워드를 제외한 `var` 와 `let` 은 값의 재할당이 가능하다.

```javascript
var score = 80;
score = 90;
```

만약 이렇게 값을 재할당 하는 경우, 변수 선언 시 초기화될 때 사용한 undefined, 처음 값을 재할당한 80 은 더 이상 사용되지 않는다.
더 이상 값이 참조되지 않는 경우(참조 카운터 === 0)에는 가비지 컬렉터에 의해 회수되며 메모리 공간 할당이 해제된다.

## 4.7 식별자 네이밍 규칙

사실 JS 에서 식별자 또는 변수 이름을 정할 때 사용하는 규칙이 있다.

- 식별자는 특수문자를 제외한 문자, 숫자, 언더스코어(\_), 달러 기호($)를 포합할 수 있다.
- 단, 식별자는 특수문자를 제외한 문자, 언더스코어(\_), 달러 기호($)로 시작해야하며 숫자로 시작할 수 없다.
- 예약어는 식별자 이름으로 사용할 수 없다.

```javascript
var person, $elem, _name, name1;
```

위 예시 모두 가능하다. 또한, 쉼표를 통해 한 번에 여러 변수를 선언할 수도 있다.

> 변수의 이름을 지어놓고 주석으로 설명이 필요하다면 이름을 다시 생각해보는 게 좋을 것이다.
> 변수 이름은 존재하는 이유를 명료하게 전달해줄 수록 좋기 때문이다.

#### 네이밍 컨벤션

영어 단어로 구성된 식별자를 만들 때 적용할 수 있는 규칙이다.
4가지 유형이 있으며 다음과 같다.

```javascript
// Camel Case
var firstName;

// snake_case
var first_name;

// Pascalcase
var FirstName;

// typeHungarianCase
var strFirstname; // 자료형(type) + 식별자(identifier)
```

이 중 자주 사용되는 것은 Camel Case 와 typeHungarianCase 가 있다.
이러한 코드 컨벤션을 지키는 것이 전체 코드 가독성을 높이는데 유리할 것이다.
